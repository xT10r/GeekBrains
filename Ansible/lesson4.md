1) Модифицировать одну из ролей и подключить ansible-vault (настроить запуск в виде ansible-playbook --vault-password-file <file>)
2) Модифицировать еще одну роль и подключить vault в качестве vars_file
3) Создать extra_vars, переопределить в нем порт nginx, произвести запуск деплоя nginx с использованием extra_vars
4) Произвести deploy docker_container (инфраструктурного сервиса, например apache zookeeper, rabbitmq, etc), переопределив exposed port, container name и задав лимит по RAM
5) Произвести deploy http-сервиса (либо написать свой, либо использовать готовый, либо SimpleHTTPServer & http.server)
5.1) Прописать задеплоенный http-сервис в балансировку nginx,
5.2) Добавить блок обработки ошибок в роль деплоя http-сервиса: проверить, слушается ли порт, если произошло ошибка, направить email по адресу, заданном в переменной http.common.email
6) Написать скрипт динамического инвентори, сформировав список хостов на любимом языке программирование (аргумент --list)
6.1*) Заказать ec2-instance в cloud provider (GKE, AWS, Azure), использовать соответствующий плагин динамического инвентория дл деплоя
7) Разметить плейбук(-и) тегами, выделать тег по конфигурированию http-сервиса, настройки OS, post-deploy-action (email, monitoring deployment, etc,)
8*) Написать Dockerfile для запуска playbook внутри docker_container.

Заметка п.4) Будет оптравлена ссылка на плейбук использования docker_container
